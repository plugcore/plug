<div class="container">
	<mat-card>
		<mat-card-header>
			<mat-card-title>{{isUpdate ? 'Update Api token' : 'Create Api token'}}</mat-card-title>
		</mat-card-header>
		<mat-card-content>
			<form [formGroup]="tokenForm" (ngSubmit)="onSubmit()">
				<mat-form-field>
					<input matInput placeholder="Token Name" formControlName="name">
				</mat-form-field>
				<div class="credentias-type">
					<h3>Credentials</h3>
					<mat-radio-group aria-label="Credentials type" formControlName="credentialsType">
						<mat-radio-button value="token">Token</mat-radio-button>
						<mat-radio-button value="user">Basic Auth</mat-radio-button>
						<mat-radio-button value="jwt">JWT</mat-radio-button>
					</mat-radio-group>
				</div>
				<div [formGroup]="tokenForm.get('credentials')" class="credentials">
					<ng-container *ngIf="isToken">
						<p>{{ currentData && currentData.credentials.token ? currentData.credentials.token : 'It will be generated automatically' }}</p>
					</ng-container>
					<ng-container *ngIf="isUser">
						<mat-form-field>
							<input matInput placeholder="User" formControlName="user">
						</mat-form-field>
						<mat-form-field>
							<input matInput placeholder="Password" formControlName="password">
						</mat-form-field>
					</ng-container>
					<ng-container *ngIf="isJwt" >
						<mat-form-field class="payload-jwt">
							<textarea matInput formControlName="payload" placeholder="Edit JWT Payload"></textarea>
						</mat-form-field>
						<p></p>
						<div class="payload-jwt">
							<mat-form-field class="payload-jwt">
								<textarea matInput readonly placeholder="JWT token to copy">
									{{ currentData && currentData.credentials.payloadToken ? currentData.credentials.payloadToken : 'It will be generated automatically' }}
								</textarea>
							</mat-form-field>
						</div>
					</ng-container>
				</div>
				<div formGroupName="quota" class="quota">
					<h3>Quota</h3>
					<div>
						<mat-form-field>
							<mat-label>Number of calls period</mat-label>
							<mat-select formControlName="intervalCalls">
								<mat-option value="any">-- No limits --</mat-option>
								<mat-option value="year">Year</mat-option>
								<mat-option value="month">Month</mat-option>
								<mat-option value="day">Day</mat-option>
								<mat-option value="hour">Hour</mat-option>
								<mat-option value="minute">Minute</mat-option>
							</mat-select>
						</mat-form-field>
						<mat-form-field>
							<mat-label>MBs transfered period</mat-label>
							<mat-select formControlName="intervalMb">
								<mat-option value="any">-- No limits --</mat-option>
								<mat-option value="year">Year</mat-option>
								<mat-option value="month">Month</mat-option>
								<mat-option value="day">Day</mat-option>
								<mat-option value="hour">Hour</mat-option>
								<mat-option value="minute">Minute</mat-option>
							</mat-select>
						</mat-form-field>
					</div>
					<div>
						<mat-form-field>
							<input matInput placeholder="Number of calls period value"
								formControlName="intervalCallsVal" type="number">
						</mat-form-field>
						<mat-form-field>
							<input matInput placeholder="MBs transfered period value" formControlName="intervalMbVal"
								type="number">
						</mat-form-field>
					</div>
					<div>
						<mat-form-field>
							<input matInput placeholder="Number of calls" formControlName="calls" type="number">
						</mat-form-field>
						<mat-form-field>
							<input matInput placeholder="MBs transfered" formControlName="mb" type="number">
						</mat-form-field>
					</div>

				</div>
				<div formGroupName="availableApis" class="permissions-groups">
					<div formGroupName="tours">
						<h3>Tours</h3>
						<mat-checkbox class="example-margin" formControlName="findToursInCity">
							Find tours in city
						</mat-checkbox>
						<mat-checkbox class="example-margin" formControlName="findRelatedProductsForTour">
							Find realted products for tour
						</mat-checkbox>
					</div>
					<div formGroupName="reservations">
						<h3>Reservations</h3>
						<mat-checkbox class="example-margin" formControlName="createReservation">
							Create reservation
						</mat-checkbox>
						<mat-checkbox class="example-margin" formControlName="findUserReservations">
							Find user reservations
						</mat-checkbox>
						<mat-checkbox class="example-margin" formControlName="cancelReservation">
							Cancel reservation
						</mat-checkbox>
					</div>
				</div>
				<div class="buttons-wrapper">
					<button style="margin-top: 20px;" mat-raised-button type="submit"
						[disabled]="!tokenForm.valid">{{isUpdate ? 'Update' : 'Create'}}</button>
				</div>
			</form>
		</mat-card-content>
	</mat-card>
</div>
